

<!DOCTYPE html>

<!-- Websites I have utilized to get help with coding issues and coming up with ideas:
  www.stackoverflow.com
  www.javascripttutorial.net
  ** I try my best to cite sources wherever I have used ideas from somewhere
-->

  <head>
    <meta charset="utf-8">

    
    <title>Annual Household Income vs Median Down Payment (20% of Median Home Price)</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="./style.css">
    <script src="../lib/d3.js"></script>
  </head>
  <body>

    <div class="all-content-center">

    <div class="title">
        <h1>Declining Home Ownership Affordability in the United States</h1>
        <p>Muhammad Rakibul Islam (Rakib)</p>
    </div>

    <br>
    
    <img src="images/header-image.jpg" alt="Header Image" style="width: 100%;">

    <p>Owning a home is one of the biggest aspirations for most people in the United States. In fact, according to a <a href="https://www.nerdwallet.com/article/mortgages/2018-home-buyer-report#:~:text=Homebuying%20concerns,have%20concerns%20about%20purchasing%20one.">survey conducted by NerdWallet</a>, “an overwhelming majority of Americans (91%) would like to own at least one home in their lifetime”.</p>
    <p>However, concerns have been rising for a good number of years now about the decreasing affordability of the market compared to income growth.</p>
    <p>During the past two years, having worked as a strategy consultant for political campaigns, I have come across several constituent surveys where homeownership affordability was a common issue.</p>
    <p>That and my personal interest in homeownership created a natural curiosity to see how affordability has changed.</p>

    <h4 class="title">Table of Contents</h4>
    <p><b><a href="#income_down">1. Income vs Down Payment</a></b></p>
    <p><b><a href="#mortgage_eligibility">2. Mortgage Eligibility</a></b></p>
    <p><b><a href="#income_down">3. Income Division by Percentile</a></b></p>

    <h2 class="title" id="income_down">Income vs Down Payment</h2>
    <p>One of the most fundamental methodologies to track homeownership affordability is to see how household income has changed relative to home prices.</p>
    <p>However, the home sales price is a much higher number when compared to income. Additionally, most home buyers traditionally use a loan instead of buying outright. Hence, the better comparison would be between the median annual income and the median down payment (calculates as 20% of the home sales price – the standardized down payment percentage used by lenders and realtors).</p>

    <div id="container"> </div>
    <script src="main.js"></script>
    
   
<div class="legend">
  <div class="legend-item">
    <div class="legend-color" style="background-color: blue;"></div>
    <span>Annual Median Household Income</span>
  </div>

  <div class="legend-item">
    <div class="legend-color" style="background-color: red;"></div>
    <span>Down Payment (20%)</span>
  </div>
</div>

<br>

<p>What is evident here is that affordability does decrease over time as the down payment overtakes income over time and is growing at a faster rate.</p>
<p>The first time this was recorded in history is in 2004 and then again things momentarily get better for a few years after the 2007-2008 financial crisis. The years leading up to the financial crisis saw housing prices increasing faster than the norm (a bubble that would eventually burst). Since getting a subprime mortgage was easy, the increased home buying demand drove housing prices up fast but just as fast as it happened, it soon tanked after the great recession.</p>
<p>2021 again registered a huge jump when mortgage rates reached a record low making home buying prospects better while at the same time, thanks to the various economic stimuli, people had more income in hand. This drove demand for housing high and since supply is limited, housing prices soared.</p>

<h2 class="title" id="mortgage_eligibility">Mortgage Eligibility</h2>
    <p>While being able to afford the down payment is after all the most important component of the home-buying process, what is also the next important step is to see if somebody will actually qualify for the mortgage itself.</p>
    <p>This is a trickier question as a lot of factors do come into play including credit score, lending history, overall debt, etc. But since we are on the topic of affordability as an income topic, the single most important factor that lenders use for mortgage qualification is to check the monthly mortgage payment to income ratio.</p>
    <p>Lenders in the United States commonly use the 28% rule where a person will qualify for a mortgage, provided again that all other conditions are met, only when their monthly mortgage payment will not exceed 28% of their monthly income.</p>
    <p>Now to visualize this, I had already gathered the median income data so it would not be difficult to calculate the median 28% of monthly income.</p>
    <p>However, the monthly mortgage payment is a little trickier to calculate. Now some of the information was already available. I knew the median home sale price, and that a 20% down payment was to be made and considered the standard 30-year loan that most buyers use. The remaining data that was necessary was the average mortgage rate for a particular year which helps determine the monthly payment. </p>   
    <p>Thankfully Excel has a very useful function called the PMT function which helps determine the monthly mortgage payment quite easily once all other data was available. </p>
    <p>You can earn more about PMT function at this <a href="https://support.microsoft.com/en-us/office/pmt-function-0214da64-9a63-4996-bc20-214433fa6441">Micrososft 365 Support Page</a>.</p>
    
    <div id="second-container"></div>

    <div class="legend">

      <div class="legend-item">
        <div class="legend-color" style="background-color: blue;"></div>
        <span>28% of Monthly Income</span>
      </div>

      <div class="legend-item">
        <div class="legend-color" style="background-color: red;"></div>
        <span>Monthly Mortgage Payment</span>
      </div>
      
    </div>

    <br>

    <p>The affordability story is reversed when it comes to mortgage eligibility. Provided that you had the down payment ready and met credit and debt factors, it became easier to qualify for a mortgage over the years. This can be seen from the bar chart of 28% monthly income and average mortgage payment over the years.</p>
    <p>It first became easy to qualify in 1993 and then things again momentarily became unaffordable before the financial crisis owing to an increase in both home sales prices and mortgage rates during those years.</p>
<p><em>*Although the data for 2022 is not available here, given the meteoric rise in interest rates while income did not, mortgage eligibility again became more difficult but it is getting better over time.</em></p>

<h2 class="title"> Income Division by Percentile </h2>

<div id="third-container"></div>

<div class="legend">
  <div class="legend-item">
    <div class="legend-color" style="background-color: green;"></div>
    <span>Top 10% Income SMEI</span>
  </div>

  <div class="legend-item">
    <div class="legend-color" style="background-color: black;"></div>
    <span>Median Income SMEI</span>
  </div>
</div>

<div class="legend">
<div class="legend-item">
  <div class="legend-color" style="background-color: blue;"></div>
  <span>Minimum Wage Income SMEI</span>
</div>

</div>

<h2>hint instead of income show affordability ratio by percentile. debt to income by percentile?</h2>

<div id="fourth-container"></div>

<div id="fifth-container"><script src="https://d3js.org/d3.v6.js">
  // set the dimensions and margins of the graph
const margin = { top: 10, right: 100, bottom: 30, left: 30 },
  width = 460 - margin.left - margin.right,
  height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
const svg = d3
  .select("#fifth-container")
  .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", `translate(${margin.left},${margin.top})`);

//Read the data
d3.csv("incomeByRace.csv").then(function (data) {
  // List of groups (here I have one group per column)
  const allGroup = ["White (non-Hispanic)", "Black", "Hispanic", "Asian"];

  // Reformat the data: we need an array of arrays of {x, y} tuples
  const dataReady = allGroup.map(function (grpName) {
    // .map allows to do something for each element of the list
    return {
      name: grpName,
      values: data.map(function (d) {
        return { Year: d.Year, value: +d[grpName] };
      }),
    };
  });

  // A color scale: one color for each group
  const myColor = d3
    .scaleOrdinal()
    .domain(allGroup)
    .range(d3.schemeSet2);

  // Add X axis --> it is a date format
  const x = d3
    .scaleLinear()
    .domain(d3.extent(data, (d) => +d.Year))
    .range([0, width]);
  svg
    .append("g")
    .attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(x).tickFormat(d3.format("d")));

  // Add Y axis
  const y = d3
    .scaleLinear()
    .domain([0, d3.max(data, (d) => Math.max(+d["White (non-Hispanic)"], +d.Black, +d.Hispanic, +d.Asian))])
    .range([height, 0]);
  svg.append("g").call(d3.axisLeft(y));

  // Add the lines
  const line = d3
    .line()
    .x((d) => x(+d.Year))
    .y((d) => y(+d.value));
  svg
    .selectAll("myLines")
    .data(dataReady)
    .join("path")
    .attr("class", (d) => d.name)
    .attr("d", (d) => line(d.values))
    .attr("stroke", (d) => myColor(d.name))
    .style("stroke-width", 4)
    .style("fill", "none");

  // Add the points
  svg
    .selectAll("myDots")
    .data(dataReady)
    .join("g")
    .style("fill", (d) => myColor(d.name))
    .attr("class", (d) => d.name)
    .selectAll("myPoints")
    .data((d) => d.values)
    .join("circle")
    .attr("cx", (d) => x(d.Year))
    .attr("cy", (d) => y(d.value))
    .attr("r", 5)
    .attr("stroke", "white");

  // Add a label at the end of each line
  svg
    .selectAll("myLabels")
    .data(dataReady)
    .join("g")
    .append("text")
    .attr("class", (d) => d.name)
    .datum((d) => {
      return { name: d.name, value: d.values[d.values.length - 1] };
    }) // keep only the last value of each time series
    .attr("transform", (d) => `translate(${x(d.value.Year)},${y(d.value.value)})`) // Put the text at the position of the last point
    .attr("x", 12) // shift the text a bit more right
    .text((d) => d.name)
    .style("fill", (d) => myColor(d.name))
    .style("font-size", 15);

  // Add a legend (interactive)
  svg
    .selectAll("myLegend")
    .data(dataReady)
    .join("g")
    .append("text")
    .attr("x", (d, i) => 30 + i * 60)
    .attr("y", 30)
    .text((d) => d.name)
    .style("fill", (d) => myColor(d.name))
    .style("font-size", 15)
    .on("click", function (event, d) {
      // is the element currently visible?
      currentOpacity = d3.selectAll("." + d.name).style("opacity");
      // Change the opacity: from 0 to 1 or from 1 to 0
      d3.selectAll("." + d.name).transition().style("opacity", currentOpacity == 1 ? 0 : 1);
    });
});
</script>
</div>

<p>test text paragraph</p>

</div>

  </body>
</html>